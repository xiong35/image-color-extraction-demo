(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{22:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var n=c(15),r=c.n(n),a=c(1),o=c.n(a),s=c(4),i=c(2),l=c.n(i),u=c(5),j=c(3),b=(c(22),c(16));function m(e){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){var n=new FileReader;n.onload=function(){if(!n.result)throw"cannot convert";e(n.result)},n.onerror=c,n.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=c(0),O=3,f=new b.ColorExtractor;function g(){var e={imageRef:Object(a.useRef)(null)}.imageRef,t=Object(a.useState)("http://blog.xiong35.cn/color-extract/3.jpg"),c=Object(j.a)(t,2),n=c[0],r=c[1],o=Object(a.useState)({compresionRate:.4,topColorCount:6}),i=Object(j.a)(o,2),b=i[0],p=i[1],g=Object(a.useState)(!1),h=Object(j.a)(g,2),x=h[0],v=h[1],N=Object(a.useState)([]),C=Object(j.a)(N,2),y=C[0],w=C[1],R=Object(a.useState)(["#fff","#000"]),k=Object(j.a)(R,2),S=k[0],E=k[1];return Object(a.useEffect)((function(){f.setConfig(b),e.current&&(x||(v(!0),f.extractColor(e.current).then((function(){console.log(f.colors),w(f.colors||[]),E(f.chooseReadableColor())})).then((function(){return v(!1)}))))}),[b,n]),Object(d.jsxs)("div",{className:"main",children:[n&&Object(d.jsx)("img",{className:"image",ref:e,src:n,alt:""}),Object(d.jsx)("input",{className:"image-select",type:"file",onChange:function(){var e=Object(u.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files||!t.target.files[0]){e.next=5;break}return e.next=3,m(t.target.files[0]);case 3:c=e.sent,r(c.toString());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(d.jsx)("input",{type:"button",value:"switch",onClick:function(){r("http://blog.xiong35.cn/color-extract/".concat(++O%4+1,".jpg"))}}),x&&Object(d.jsx)("h2",{children:"Processing..."}),Object(d.jsx)("div",{className:"color",children:y.map((function(e){return Object(d.jsxs)("div",{className:"color-item",children:[Object(d.jsx)("div",{className:"color-item-block",style:{background:e.color}}),e.count]})}))}),Object(d.jsxs)("div",{className:"settings",children:[Object(d.jsxs)("div",{className:"settings-color_count",children:[Object(d.jsxs)("div",{children:["top color count: ",b.topColorCount]}),Object(d.jsx)("input",{className:"settings-color_count-input",type:"number",value:b.topColorCount,onChange:function(e){return p(Object(s.a)(Object(s.a)({},b),{},{topColorCount:Number(e.target.value)>=2?Number(e.target.value):2}))}})]}),Object(d.jsxs)("div",{className:"settings-rate",children:[Object(d.jsxs)("div",{children:["compresion rate: ",b.compresionRate]}),Object(d.jsx)("input",{type:"range",className:"settings-rate-input",value:100*b.compresionRate,onChange:function(e){return p(Object(s.a)(Object(s.a)({},b),{},{compresionRate:Number(e.target.value)/100<.02?.02:Number(e.target.value)/100}))}})]})]}),Object(d.jsxs)("div",{className:"demo",style:{background:S[0],color:S[1]},children:[Object(d.jsx)("img",{src:n,className:"demo-image",alt:""}),Object(d.jsxs)("div",{className:"demo-text",children:[Object(d.jsx)("div",{className:"demo-title",children:"Lorem ipsum dolor"}),Object(d.jsx)("div",{className:"demo-content",children:"sit amet consectetur adipisicing elit. Omnis labore perferendis aliquid modi qui beatae enim"})]})]})]})}r.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.183ca8e0.chunk.js.map